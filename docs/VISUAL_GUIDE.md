# Visual Build Pipeline Guide

Illustrated guide showing exactly what happens during the macOS build process.

## ๐ฏ One-Command Build

```
./scripts/macos-pipeline.sh
                โ
    โโโโโโโโโโโโโโโโโโโโโโโโโ
    โ  Complete Pipeline    โ
    โโโโโโโโโโโโโโโโโโโโโโโโโ
                โ
    โโโโโโโโโโโโโโโโโโโโโโโโโ
    โ   STEP 1: Setup       โ
    โ   macos-setup.sh      โ
    โ   โฑ๏ธ  5-10 minutes     โ
    โโโโโโโโโโโโโโโโโโโโโโโโโ
                โ
    โโโโโโโโโโโโโโโโโโโโโโโโโ
    โ   STEP 2: Prebuild    โ
    โ   macos-prebuild.sh   โ
    โ   โฑ๏ธ  2-3 minutes      โ
    โโโโโโโโโโโโโโโโโโโโโโโโโ
                โ
    โโโโโโโโโโโโโโโโโโโโโโโโโ
    โ   STEP 3: Build       โ
    โ   macos-build.sh      โ
    โ   โฑ๏ธ  1-2 minutes      โ
    โโโโโโโโโโโโโโโโโโโโโโโโโ
                โ
    โโโโโโโโโโโโโโโโโโโโโโโโโ
    โ   STEP 4: Run         โ
    โ   macos-run.sh        โ
    โ   โฑ๏ธ  10-15 seconds    โ
    โโโโโโโโโโโโโโโโโโโโโโโโโ
                โ
        โ App Running!
```

## ๐ STEP 1: Environment Setup

**What it does:**
```
./scripts/macos-setup.sh
            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Check macOS Version         โ
โ โ macOS 12.0+               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Install Xcode Tools         โ
โ โข xcode-select --install    โ
โ โข Accept license            โ
โ โ Xcode 15.0+               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Install Homebrew            โ
โ โข Package manager           โ
โ โ brew installed            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Install Node.js             โ
โ โข JavaScript runtime        โ
โ โ node 18+                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Install Bun                 โ
โ โข Fast JS runtime           โ
โ โ bun installed             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Install CocoaPods           โ
โ โข iOS dependency manager    โ
โ โ pod installed             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Install iOS Simulators      โ
โ โข Download via Xcode        โ
โ โ iPhone simulators ready   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Install Optional Tools      โ
โ โข Watchman (file watching)  โ
โ โข EAS CLI (Expo builds)     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
     โ Setup Complete!
```

## ๐ง STEP 2: Prebuild iOS Project

**What it does:**
```
./scripts/macos-prebuild.sh
            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Install JS Dependencies     โ
โ $ cd mobile                 โ
โ $ bun install               โ
โ โ node_modules/ created     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Generate iOS Project        โ
โ $ npx expo prebuild         โ
โ   --platform ios --clean    โ
โ                             โ
โ Creates:                    โ
โ โข ios/ folder               โ
โ โข Xcode workspace           โ
โ โข Podfile                   โ
โ โข Native code structure     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Install CocoaPods Deps      โ
โ $ cd ios                    โ
โ $ pod install               โ
โ                             โ
โ Installs:                   โ
โ โข React Native              โ
โ โข Expo modules              โ
โ โข Custom native modules     โ
โ โข narrator-turbo            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Configure Build Settings    โ
โ โข Create .xcode.env.local   โ
โ โข Set NODE_BINARY path      โ
โ โข Configure Swift           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Verify Structure            โ
โ โ Xcode workspace exists    โ
โ โ Pods installed            โ
โ โ Native module linked      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
    โ Prebuild Complete!

Final structure:
mobile/
โโโ ios/
โ   โโโ noblenarrator.xcworkspace  โ Open this in Xcode
โ   โโโ Podfile
โ   โโโ Pods/
โ       โโโ React-Core
โ       โโโ ExpoModules
โ       โโโ NarratorTurboModule    โ Custom module
โโโ node_modules/
```

## ๐๏ธ STEP 3: Build (Compilation)

**What it does:**
```
./scripts/macos-build.sh
            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Clean Previous Build        โ
โ $ xcodebuild clean          โ
โ โข Remove old artifacts      โ
โ โข Clear derived data        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Compile Swift Code          โ
โ NarratorTurboModule.swift   โ
โ โ                           โ
โ Swift Compiler              โ
โ โ                           โ
โ Binary (.o files)           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Compile Objective-C         โ
โ NarratorTurboModule.mm      โ
โ โ                           โ
โ Clang Compiler              โ
โ โ                           โ
โ Binary (.o files)           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Link Native Libraries       โ
โ โข React Native bridge       โ
โ โข AVFoundation              โ
โ โข UIKit                     โ
โ โข Custom modules            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Create App Binary           โ
โ All .o files                โ
โ โ                           โ
โ Linker                      โ
โ โ                           โ
โ noblenarrator.app           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Package Resources           โ
โ โข Assets                    โ
โ โข JS bundle                 โ
โ โข Info.plist                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
    โ Build Complete!

Output:
mobile/ios/build/
โโโ Build/
    โโโ Products/
        โโโ Debug-iphonesimulator/
            โโโ noblenarrator.app  โ Your compiled app
```

## ๐ฑ STEP 4: Run on Simulator

**What it does:**
```
./scripts/macos-run.sh
            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ List Available Simulators   โ
โ $ xcrun simctl list         โ
โ                             โ
โ Available:                  โ
โ 1. iPhone 15 Pro            โ
โ 2. iPhone 15                โ
โ 3. iPhone 14 Pro            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Launch Simulator            โ
โ โข Boot iOS Simulator        โ
โ โข Wait for ready            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Install App                 โ
โ $ xcrun simctl install      โ
โ   <device> <app>            โ
โ โข Copy app to simulator     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Start Metro Bundler         โ
โ $ npx expo start            โ
โ โข Serve JS bundle           โ
โ โข Watch for changes         โ
โ โข Enable hot reload         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Launch App                  โ
โ $ xcrun simctl launch       โ
โ   <device> <bundle-id>      โ
โ โข Start app process         โ
โ โข Connect to Metro          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
    โ App Running!

You see:
โโโโโโโโโโโโโโโโโโโโโโ
โ   iOS Simulator    โ
โ                    โ
โ  โโโโโโโโโโโโโโโโ  โ
โ  โ              โ  โ
โ  โ  Your App    โ  โ
โ  โ  Running!    โ  โ
โ  โ              โ  โ
โ  โโโโโโโโโโโโโโโโ  โ
โโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ Development Workflow

```
Start Development
        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Terminal 1: Metro Bundler   โ
โ $ cd mobile && bun start    โ
โ                             โ
โ Metro is running...         โ
โ โข Watching for changes      โ
โ โข Hot reload enabled        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Terminal 2: Run App         โ
โ $ ./scripts/macos-run.sh    โ
โ                             โ
โ App launched on simulator   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Edit JavaScript Code        โ
โ โข Save file                 โ
โ โข Auto-reload               โ
โ โข See changes instantly     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Edit Native Code            โ
โ โข Swift/Objective-C         โ
โ โข Rebuild required          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Rebuild Native              โ
โ $ ./scripts/macos-build.sh  โ
โ โข Recompile changed files   โ
โ โข Fast (incremental)        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Relaunch App                โ
โ $ ./scripts/macos-run.sh    โ
โ โข See native changes        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        โ
    ๐ Repeat...
```

## ๐งน Clean Build Process

```
Having Issues?
        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Standard Clean              โ
โ $ ./scripts/macos-clean.sh  โ
โ                             โ
โ Removes:                    โ
โ โข Build artifacts           โ
โ โข Metro cache               โ
โ โข Temp files                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Deep Clean (Nuclear)        โ
โ $ ./scripts/macos-clean.sh  โ
โ   --deep                    โ
โ                             โ
โ Removes:                    โ
โ โข node_modules/             โ
โ โข ios/                      โ
โ โข Pods cache                โ
โ โข Watchman cache            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Rebuild Everything          โ
โ $ ./scripts/macos-          โ
โ   prebuild.sh               โ
โ                             โ
โ Fresh start!                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        โ
    โ Clean Build Done!
```

## ๐ฏ Native Module Flow

```
JavaScript Code
        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ import NarratorTurbo        โ
โ from 'narrator-turbo-       โ
โ      module'                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ React Native Bridge         โ
โ โข Serializes data           โ
โ โข Calls native method       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ NarratorTurboModule.mm      โ
โ โข Objective-C bridge        โ
โ โข RCT_EXTERN_MODULE         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ NarratorTurboModule.swift   โ
โ โข Swift implementation      โ
โ โข AVSpeechSynthesizer       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ iOS Framework               โ
โ โข AVFoundation              โ
โ โข Native TTS engine         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Events Back to JS           โ
โ โข onWordBoundary            โ
โ โข onSpeechEnd               โ
โ โข sendEvent()               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        โ
    ๐ต Audio Output!
```

## ๐ File Size Breakdown

```
Total Build Output: ~200-300 MB

mobile/ios/build/
โโโ Binary (.app)              ~50 MB
โโโ JavaScript Bundle          ~5-10 MB
โโโ Assets (images, etc.)      ~10-20 MB
โโโ React Native libs          ~80-100 MB
โโโ Native modules             ~20-30 MB
โโโ Debug symbols              ~50-100 MB
```

## โก Performance Timeline

```
First Build (Cold):
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Setup        โโโโโโโโโโ 10m โ
โ Prebuild     โโโโโโโโโโ  3m โ
โ Build        โโโโโโโโโโ  2m โ
โ Run          โโโโโโโโโโ 15s โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ Total        โโโโโโโโโโ 15m โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

Subsequent Builds (Warm):
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Prebuild     โโโโโโโโโโ  2m โ
โ Build        โโโโโโโโโโ  1m โ
โ Run          โโโโโโโโโโ 10s โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ Total        โโโโโโโโโโ  3m โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

Incremental Build:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Build        โโโโโโโโโโ 30s โ
โ Run          โโโโโโโโโโ 10s โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ Total        โโโโโโโโโโ 40s โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ What Each Tool Does

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Xcode                       โ
โ โข IDE for iOS development   โ
โ โข Includes compilers        โ
โ โข Includes simulators       โ
โ โข Required for iOS builds   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Node.js / Bun               โ
โ โข Runs JavaScript           โ
โ โข Package management        โ
โ โข Development server        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ CocoaPods                   โ
โ โข iOS dependency manager    โ
โ โข Links native libraries    โ
โ โข Creates .xcworkspace      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Expo                        โ
โ โข React Native framework    โ
โ โข Prebuild generates iOS    โ
โ โข Development tools         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Metro                       โ
โ โข JavaScript bundler        โ
โ โข Hot reload                โ
โ โข Development server        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## โ Success Indicators

```
Everything Working:

Terminal 1 (Metro):
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ $ bun start                 โ
โ Starting Metro Bundler...   โ
โ โ Metro running on :8081    โ
โ โ Logs are being saved      โ
โ โ Waiting for connections   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

Terminal 2 (App):
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ $ ./scripts/macos-run.sh    โ
โ โ Simulator launched        โ
โ โ App installed             โ
โ โ App started               โ
โ โ Connected to Metro        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

Simulator:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ โ No error screens          โ
โ โ UI renders correctly      โ
โ โ Interactions work         โ
โ โ Native features work      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

**This visual guide should help you understand exactly what's happening at each step!**

For detailed commands and troubleshooting, see:
- [QUICK_START.md](./QUICK_START.md)
- [MACOS_BUILD_GUIDE.md](./MACOS_BUILD_GUIDE.md)
- [CHECKLIST.md](./CHECKLIST.md)
